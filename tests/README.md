# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP Jira Server

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ validation.test.ts     # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ jira-client.test.ts    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ API
‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îú‚îÄ‚îÄ search-logic.test.ts   # –¢–µ—Å—Ç—ã –ª–æ–≥–∏–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ confluence.test.ts     # –¢–µ—Å—Ç—ã Confluence –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ src/                       # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îú‚îÄ‚îÄ date-utils.test.ts     # –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ formatters.test.ts     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ jql-builder.test.ts    # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ JQL –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ validation.test.ts     # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îî‚îÄ‚îÄ jira-responses.ts      # –ú–æ–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç API
‚îú‚îÄ‚îÄ helpers/
‚îÇ   ‚îî‚îÄ‚îÄ test-utils.ts          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ setup.ts                   # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Jest**: –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Nock**: –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **TypeScript**: –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏—è
- **ts-jest**: TypeScript –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è Jest

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
yarn test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
yarn test --coverage

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
yarn test tests/tools/confluence.test.ts

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞–ø–∫–∏
yarn test tests/src/
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Jest –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **moduleNameMapper**: –ú–∞–ø–ø–∏–Ω–≥ `.js` –∏–º–ø–æ—Ä—Ç–æ–≤ –Ω–∞ `.ts` —Ñ–∞–π–ª—ã
- **ts-jest**: –¢—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏—è TypeScript
- **setupFilesAfterEnv**: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `setup.ts`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–∫–∏, —Ä–µ–∞–ª—å–Ω—ã–µ API –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
JIRA_HOST=https://test-jira.example.com
JIRA_USERNAME=test@example.com
JIRA_API_TOKEN=test-token
```

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —Ç–∏–ø–∞–º:
- **`src/`** - –£—Ç–∏–ª–∏—Ç—ã (date-utils, formatters, jql-builder, validation)
- **`tools/`** - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP (search-logic, confluence)
- **`integration/`** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å nock
- **`config/`** - –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞:
```typescript
// tests/tools/new-tool.test.ts
import nock from "nock";

describe("New Tool", () => {
  beforeEach(() => {
    nock.cleanAll();
  });

  it("should handle API calls", async () => {
    nock("https://api.example.com")
      .get("/endpoint")
      .reply(200, { data: "test" });

    // –¢–µ—Å—Ç –ª–æ–≥–∏–∫–∏
  });
});
```